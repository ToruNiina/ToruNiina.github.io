<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Accuracy of Rsqrt and Weird Shadows in Ray Tracing - Toru Niina</title><meta name=Description content><meta property="og:title" content="Accuracy of Rsqrt and Weird Shadows in Ray Tracing"><meta property="og:description" content="Almost one and a half years ago, when I was learning Rust, I wrote a ray tracer based on the widely-known textbook &ldquo;Ray tracing in one weekend&rdquo;. The book is great and it only took me two days to write the ray tracer. And I found something a bit weird when I tried to optimize it. I&rsquo;ve looked into the causes of that a while ago, but this time I&rsquo;m going to take it a little further."><meta property="og:type" content="article"><meta property="og:url" content="https://toruniina.github.io/posts/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/"><meta property="article:published_time" content="2020-05-30T21:46:44+09:00"><meta property="article:modified_time" content="2020-05-30T21:46:44+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Accuracy of Rsqrt and Weird Shadows in Ray Tracing"><meta name=twitter:description content="Almost one and a half years ago, when I was learning Rust, I wrote a ray tracer based on the widely-known textbook &ldquo;Ray tracing in one weekend&rdquo;. The book is great and it only took me two days to write the ray tracer. And I found something a bit weird when I tried to optimize it. I&rsquo;ve looked into the causes of that a while ago, but this time I&rsquo;m going to take it a little further."><meta name=application-name content="Toru Niina"><meta name=apple-mobile-web-app-title content="Toru Niina"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://toruniina.github.io/posts/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/><link rel=prev href=https://toruniina.github.io/posts/building-a-website-powered-by-hugo-and-loveit/><link rel=next href=https://toruniina.github.io/posts/writing-board-game-ai/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.en.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Accuracy of Rsqrt and Weird Shadows in Ray Tracing","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/toruniina.github.io\/posts\/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing\/"},"genre":"posts","keywords":"ray-tracing","wordcount":771,"url":"https:\/\/toruniina.github.io\/posts\/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing\/","datePublished":"2020-05-30T21:46:44+09:00","dateModified":"2020-05-30T21:46:44+09:00","author":{"@type":"Person","name":"Toru Niina"},"description":""}</script></head><body><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':(''==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:''==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Toru Niina">Toru Niina</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/biography/><i class="fas fa-user"></i>Biography </a><a class=menu-item href=/publications/><i class="fas fa-book"></i>Publications </a><a class=menu-item href=/projects/><i class="fas fa-cubes"></i>Projects </a><a class=menu-item href=/posts/><i class="fas fa-pen-square"></i>Posts </a><a class=menu-item href=/categories/><i class="fas fa-folder"></i>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item language" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select id=language-select-desktop onchange="location=this.value;"><option value=/posts/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/ selected>English</option><option value=/ja/posts/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/>日本語</option></select>
</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Toru Niina">Toru Niina</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/biography/><i class="fas fa-user"></i>Biography</a><a class=menu-item href=/publications/><i class="fas fa-book"></i>Publications</a><a class=menu-item href=/projects/><i class="fas fa-cubes"></i>Projects</a><a class=menu-item href=/posts/><i class="fas fa-pen-square"></i>Posts</a><a class=menu-item href=/categories/><i class="fas fa-folder"></i>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a><a href=javascript:void(0); class=menu-item title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select onchange="location=this.value;"><option value=/posts/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/ selected>English</option><option value=/ja/posts/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/>日本語</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Accuracy of Rsqrt and Weird Shadows in Ray Tracing</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Toru Niina</a></span>&nbsp;
<span class=post-category>included in<a href=/categories/programming/>
<i class="far fa-folder fa-fw"></i>Programming</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i><time datetime=2020-05-30>2020-05-30</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 771 words&nbsp;
<i class="far fa-clock fa-fw"></i>4 min&nbsp;</div></div><div class="details toc" id=toc-static><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#background-rsqrt-instruction>Background: rsqrt instruction</a></li><li><a href=#observation-pattern-of-errors>Observation: pattern of errors</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>Almost one and a half years ago, when I was learning Rust, I wrote a ray tracer based on the widely-known textbook <a href=https://raytracing.github.io/books/RayTracingInOneWeekend.html target=_blank rel="noopener noreffer">&ldquo;Ray tracing in one weekend&rdquo;</a>.
The book is great and it only took me two days to write the ray tracer. And I found something a bit weird when I tried to optimize it.
I&rsquo;ve looked into the causes of that a while ago, but this time I&rsquo;m going to take it a little further.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reference_16x9.png data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reference_16x9.png, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reference_16x9.png 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reference_16x9.png 2x" data-sizes=auto alt=reference_image title=reference_image></p><h2 id=background-rsqrt-instruction>Background: rsqrt instruction</h2><p>In the 3D CG field, there is a popular optimization technique called <a href=https://en.wikipedia.org/wiki/Fast_inverse_square_root target=_blank rel="noopener noreffer">fast inverse square root</a>.
It is a fast approximation of \(1/\sqrt{x}\) that is computed when we regularize the length of a vector.</p><p>Nowadays, most x86_64 CPUs implement <code>rsqrtss</code> instruction that have higher accuracies.
By replacing <code>sqrt</code> and division with <code>rsqrtss</code>, we would gain some speedup.</p><p>In Rust, you can call intrinsic functions via <code>std::arch::x86_64</code>.
To find out what the instructions do, <a href=https://software.intel.com/sites/landingpage/IntrinsicsGuide/ target=_blank rel="noopener noreffer">Intel Intrinsics Gude</a> is helpful.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-rust data-lang=rust><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>arch</span>::<span class=n>x86_64</span>::<span class=n>_mm_set_ss</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>arch</span>::<span class=n>x86_64</span>::<span class=n>_mm_rsqrt_ss</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>arch</span>::<span class=n>x86_64</span>::<span class=n>_mm_cvtss_f32</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>impl</span><span class=w> </span><span class=n>Vector3</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>rlen</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=w> </span>-&gt; <span class=kt>f32</span> <span class=p>{</span><span class=w>
</span><span class=w></span><span class=c1>//         original implementation
</span><span class=c1>//         1.0 / self.len()
</span><span class=c1></span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>lsq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=bp>self</span><span class=p>.</span><span class=n>len_sq</span><span class=p>();</span><span class=w>
</span><span class=w>        </span><span class=k>unsafe</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>_mm_cvtss_f32</span><span class=p>(</span><span class=n>_mm_rsqrt_ss</span><span class=p>(</span><span class=n>_mm_set_ss</span><span class=p>(</span><span class=n>lsq</span><span class=p>)))</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></td></tr></table></div></div><p>When I made this change and ran it again, the image looked like the following.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_16x9.png data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_16x9.png, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_16x9.png 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_16x9.png 2x" data-sizes=auto alt=artifact_image title=artifact_image></p><p>You can see that there are ring-shaped shadows that were not seen in the image shown before.
From the concentric pattern, we can assume that the artifacts are due to the length of the ray emitted from the camera.
Since the code regularizes all the rays, I guessed the numerical error in <code>rsqrtss</code> causes this.
Actually, the artifacts disappear when I replaced <code>rsqrtss</code> by normal division and square root.</p><h2 id=observation-pattern-of-errors>Observation: pattern of errors</h2><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reflection.png data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reflection.png, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reflection.png 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/reflection.png 2x" data-sizes=auto alt=reflection title=reflection></p><p>If a ray tracer overestimates the length of the ray, the position where the ray hits the object becomes distant and would be buried inside the object.
A ray that starts from the inside of an object never escapes from it unless it is transparent (A).
This is not distinguishable from the case when the ray does not hit to a light source (B), so the pixel would look like a shadow.
It may make the pixel darker.</p><p>To test this hypothesis, &ldquo;numerical errors in <code>rsqrtss</code> when calculating the length of rays cause the artifacts&rdquo;, I plotted the numerical error in a similar way as the ray tracing.
I calculated the length of the rays from the camera to the screen and plotted the relative error in the log scale only when the <code>rsqrtss</code> overestimates the length.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/relative_error_plot.svg data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/relative_error_plot.svg, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/relative_error_plot.svg 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/relative_error_plot.svg 2x" data-sizes=auto alt=relative_error_plot title=relative_error_plot></p><p>The pattern is more intricate than I expected.</p><p>Come to think of it, I used some tricks to reduce the noise in ray tracing.
For example, I averaged the color from several rays that pass through different points in the pixel.
By this operation, the local patterns of the numerical error may disappear.</p><p>To check this, I modified the code so that the rays always pass through the center of the pixel.
Then the pattern of the artifacts appears almost match the pattern of numerical errors.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_center_16x9.png data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_center_16x9.png, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_center_16x9.png 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_center_16x9.png 2x" data-sizes=auto alt=artifact_center title=artifact_center></p><p>Also, there is always an error in floating-point operation, so the collisions that occur immediately after a ray is emitted are normally ignored.
In the image shown above, I used \(10^{-5}\) as tolerance.
If the overestimate causes the artifacts, larger tolerance makes the artifacts fainter, and vice versa.</p><p>Let&rsquo;s set the tolerance to 0.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_no_tolerance_16x9.png data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_no_tolerance_16x9.png, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_no_tolerance_16x9.png 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_no_tolerance_16x9.png 2x" data-sizes=auto alt=artifact_no_tolerance title=artifact_no_tolerance></p><p>Conversely, let&rsquo;s make it larger, like 0.05, so that the artifacts almost disappear.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_big_tolerance_16x9.png data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_big_tolerance_16x9.png, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_big_tolerance_16x9.png 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/artifact_big_tolerance_16x9.png 2x" data-sizes=auto alt=artifact_big_tolerance title=artifact_big_tolerance></p><p>It looks okay at first glance. But you can see that some part of the real shadows becomes a bit brighter.
For example, the shadow under the pink sphere located at the center looks pink.</p><h2 id=conclusion>Conclusion</h2><p>From these observations, it seems that trying to address the problem by increasing tolerance will lead to other problems.
So the most obvious solution would be to stop using <code>rsqrt</code>. But there is another way.</p><p>The original algorithm of the <a href=https://en.wikipedia.org/wiki/Fast_inverse_square_root target=_blank rel="noopener noreffer">fast inverse square root</a> is a combination of bit operations and floating-point operations.
The floating-point operations correspond to Newton&rsquo;s method. Starting from the approximation derived by bit operations, it increases the accuracy of the result.
The same method can be applied to this case.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-rust data-lang=rust><span class=k>impl</span><span class=w> </span><span class=n>Vector3</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>rlen</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=w> </span>-&gt; <span class=kt>f32</span> <span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>lsq</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=bp>self</span><span class=p>.</span><span class=n>len_sq</span><span class=p>();</span><span class=w>
</span><span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>unsafe</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>_mm_cvtss_f32</span><span class=p>(</span><span class=n>_mm_rsqrt_ss</span><span class=p>(</span><span class=n>_mm_set_ss</span><span class=p>(</span><span class=n>lsq</span><span class=p>)))</span><span class=w>
</span><span class=w>        </span><span class=p>};</span><span class=w>
</span><span class=w>        </span><span class=n>r</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mf>1.5</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>lsq</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>0.5</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>r</span><span class=p>)</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></td></tr></table></div></div><p>&mldr; and the artifacts disappeared!</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/example_rsqrt_newton_16x9.png data-srcset="/images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/example_rsqrt_newton_16x9.png, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/example_rsqrt_newton_16x9.png 1.5x, /images/accuracy-of-rsqrt-and-weird-shadows-in-ray-tracing/example_rsqrt_newton_16x9.png 2x" data-sizes=auto alt=rsqrt_newton title=rsqrt_newton></p><p>Unfortunately, I couldn’t find any significant difference in the run time performance between the normal <code>sqrt()</code> version and this in one execution.
So the best solution, considering both performance and readability, might be to use <code>1 / sqrt(x)</code>, not <code>rsqrt</code>.
But the result may change in another situation, like with SIMD instructions or on GPU.</p><p>I hope this result will help those who are in trouble with weird shadows in ray tracing.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>The article was updated on 2020-05-30</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/ray-tracing/>ray-tracing</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/building-a-website-powered-by-hugo-and-loveit/ class=prev rel=prev title="Building a website powered by Hugo and LoveIt"><i class="fas fa-angle-left fa-fw"></i>Building a website powered by Hugo and LoveIt</a>
<a href=/posts/writing-board-game-ai/ class=next rel=next title="Writing board game AI">Writing board game AI<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.70.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.6"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Toru NIINA</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":65535},"comment":{},"headerMode":{"desktop":null,"mobile":null},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type=text/javascript src="https://polyfill.io/v3/polyfill.min.js?features=html5shiv%2CElement.prototype.closest%2CrequestAnimationFrame%2CCustomEvent%2CPromise%2CObject.entries%2CObject.assign%2CObject.values%2Cfetch%2CElement.prototype.after%2CArray.prototype.fill%2CIntersectionObserver%2CArray.from%2CArray.prototype.find%2CMath.sign"></script><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/object-fit-images/ofi.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/js/theme.min.js></script></body></html>